
(function($,window,document,undefined){$.fn.clickFlyout=function clickFlyout(options){options=$.extend({autoCollapse:true,closeOnEsc:false,debug:false,focusManagement:'none',triggerSelector:'.flyout__trigger',overlaySelector:'.flyout__overlay'},options);return this.each(function onEach(){var $widget=$(this);var $trigger=$widget.find(options.triggerSelector).first();var $overlay=$widget.find(options.overlaySelector).first();var isExpanded=function(){return $trigger.attr('aria-expanded')==='true';};var setFocusToOverlay=function(){$overlay.focus();};var setFocusToFirst=function(){$overlay.focusable().first().focus();};var setFocusToId=function(){$overlay.find('#'+options.focusManagement).focus();};var getFocusManagementBehaviour=function(){var func;switch(options.focusManagement){case'none':func=Function;break;case'overlay':$overlay.attr('tabindex','-1');func=setFocusToOverlay;break;case'first':func=setFocusToFirst;break;default:func=setFocusToId;break;}
return func;};var doFocusManagement=getFocusManagementBehaviour();var expandFlyout=function(){if(isExpanded()===false){$trigger.attr('aria-expanded','true');$widget.trigger('flyoutExpand');doFocusManagement();}};var collapseFlyout=function(){if(isExpanded()===true){$trigger.attr('aria-expanded','false');$widget.trigger('flyoutCollapse');}};var toggleFlyout=function(){if(isExpanded()===true){collapseFlyout();}else{expandFlyout();}};var onTriggerClick=function(){toggleFlyout();};$widget.nextId('flyout');if($overlay.prop('id')===''){$overlay.prop('id',$widget.prop('id')+'-overlay');}
$trigger.attr('aria-controls',$overlay.prop('id')).attr('aria-expanded','false');$trigger.on('click',onTriggerClick);if(options.autoCollapse===true){$widget.focusExit().on('focusExit',collapseFlyout);$trigger.on('focus',collapseFlyout);}
if(options.closeOnEsc===true){$widget.on('keydown',function(e){if(e.keyCode===27){collapseFlyout();$trigger.focus();}});}
$widget.addClass('flyout--js');});};}(jQuery,window,document));